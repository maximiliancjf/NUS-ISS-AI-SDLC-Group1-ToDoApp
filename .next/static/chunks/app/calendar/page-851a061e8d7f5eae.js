(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{1610:(e,t,r)=>{Promise.resolve().then(r.bind(r,9689))},9689:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(5155),s=r(2115),l=r(2619),n=r.n(l);function i(){let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(new Date),[i,d]=(0,s.useState)(null),[o,c]=(0,s.useState)(!1),[u,g]=(0,s.useState)(""),[h,x]=(0,s.useState)("medium");(0,s.useEffect)(()=>{m()},[]);let m=async()=>{try{let e=await fetch("/api/todos"),r=await e.json();t(r)}catch(e){console.error("Error fetching todos:",e)}},b=e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-green-100 text-green-800 border-green-300"}},p=(e,t,r)=>"".concat(e,"-").concat(String(t+1).padStart(2,"0"),"-").concat(String(r).padStart(2,"0")),y=t=>e.filter(e=>e.due_date.split("T")[0]===t&&!e.completed),j=async()=>{if(u.trim()&&i)try{(await fetch("/api/todos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:u,due_date:i,priority:h})})).ok&&(m(),c(!1),g(""),x("medium"),d(null))}catch(e){console.error("Error adding todo:",e)}},v=new Date,N=p(v.getFullYear(),v.getMonth(),v.getDate());return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"\uD83D\uDCC5 Calendar View"}),(0,a.jsx)(n(),{href:"/",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"← Back to List"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("button",{onClick:()=>{l(new Date(r.getFullYear(),r.getMonth()-1))},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"← Previous"}),(0,a.jsxs)("h2",{className:"text-2xl font-semibold text-gray-800",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][r.getMonth()]," ",r.getFullYear()]}),(0,a.jsx)("button",{onClick:()=>{l(new Date(r.getFullYear(),r.getMonth()+1))},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Next →"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,a.jsx)("div",{className:"text-center font-semibold text-gray-600 py-2",children:e},e)),(()=>{var e,t;r.getFullYear(),r.getMonth();let a=new Date((e=r).getFullYear(),e.getMonth()+1,0).getDate(),s=new Date((t=r).getFullYear(),t.getMonth(),1).getDay(),l=[];for(let e=0;e<s;e++)l.push(null);for(let e=1;e<=a;e++)l.push(e);return l})().map((t,s)=>{if(null===t)return(0,a.jsx)("div",{className:"min-h-[120px]"},"empty-".concat(s));let l=p(r.getFullYear(),r.getMonth(),t),n=y(l),i=e.filter(e=>e.due_date.split("T")[0]===l&&e.completed),o=l===N;return(0,a.jsxs)("div",{onClick:()=>{d(p(r.getFullYear(),r.getMonth(),t)),c(!0)},className:"min-h-[120px] p-2 border-2 rounded-lg cursor-pointer transition hover:border-blue-400 ".concat(o?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"),children:[(0,a.jsx)("div",{className:"text-sm font-semibold mb-2 ".concat(o?"text-blue-600":"text-gray-700"),children:t}),(0,a.jsxs)("div",{className:"space-y-1",children:[n.slice(0,3).map(e=>(0,a.jsx)("div",{className:"text-xs px-2 py-1 rounded border ".concat(b(e.priority)," truncate"),title:e.title,children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat((e=>{switch(e){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500"}})(e.priority))}),(0,a.jsx)("span",{className:"truncate",children:e.title})]})},e.id)),n.length>3&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 px-2",children:["+",n.length-3," more"]}),i.length>0&&(0,a.jsxs)("div",{className:"text-xs text-green-600 px-2",children:["✓ ",i.length," completed"]})]})]},t)})]})]}),o&&i&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Add Todo for ",i]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",value:u,onChange:e=>g(e.target.value),placeholder:"What needs to be done?",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",autoFocus:!0}),(0,a.jsxs)("select",{value:h,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,a.jsx)("option",{value:"low",children:"Low Priority"}),(0,a.jsx)("option",{value:"medium",children:"Medium Priority"}),(0,a.jsx)("option",{value:"high",children:"High Priority"})]})]}),y(i).length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Existing todos for this day:"}),(0,a.jsx)("div",{className:"space-y-2",children:y(i).map(e=>(0,a.jsx)("div",{className:"text-sm px-3 py-2 rounded border ".concat(b(e.priority)),children:e.title},e.id))})]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end mt-6",children:[(0,a.jsx)("button",{onClick:()=>{c(!1),g(""),x("medium"),d(null)},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,a.jsx)("button",{onClick:j,disabled:!u.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Todo"})]})]})})]})})}}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=1610)),_N_E=e.O()}]);